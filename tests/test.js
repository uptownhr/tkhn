var assert = require("assert"),
    GetHN = require('../get-hn');

describe('Array', function(){
    describe('#indexOf()', function(){
        it('should return -1 when the value is not present', function(){
            assert.equal(-1, [1,2,3].indexOf(5));
            assert.equal(-1, [1,2,3].indexOf(0));
        })
    })
});


describe('GetHN', function(){

    var html_response = "\n<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"news.css?Acam15eCKGaY02PWhYVW\">\n    <link rel=\"shortcut icon\" href=\"favicon.ico\">\n    <script type=\"text/javascript\">\n        function byId(id) {\n            return document.getElementById(id);\n        }\n\n        function vote(node) {\n            var v = node.id.split(/_/);   // {\'up\', \'123\'}\n            var item = v[1];\n\n            // hide arrows\n            byId(\'up_\'   + item).style.visibility = \'hidden\';\n            byId(\'down_\' + item).style.visibility = \'hidden\';\n\n            // ping server\n            var ping = new Image();\n            ping.src = node.href;\n\n            return false; // cancel browser nav\n        } </script><title>Hacker News</title></head><body><center><table border=0 cellpadding=0 cellspacing=0 width=\"85%\" bgcolor=#f6f6ef><tr><td bgcolor=#ff6600><table border=0 cellpadding=0 cellspacing=0 width=\"100%\" style=\"padding:2px\"><tr><td style=\"width:18px;padding-right:4px\"><a href=\"http://ycombinator.com\"><img src=\"y18.gif\" width=18 height=18 style=\"border:1px #ffffff solid;\"></img></a></td><td style=\"line-height:12pt; height:10px;\"><span class=\"pagetop\"><b><a href=\"news\">Hacker News</a></b><img src=\"s.gif\" height=1 width=10><a href=\"newest\">new</a> | <a href=\"threads?id=uptownhr\">threads</a> | <a href=\"newcomments\">comments</a> | <a href=\"ask\">ask</a> | <a href=\"jobs\">jobs</a> | <a href=\"submit\">submit</a></span></td><td style=\"text-align:right;padding-right:4px;\"><span class=\"pagetop\"><a href=\"user?id=uptownhr\">uptownhr</a>&nbsp;(35)&nbsp;|&nbsp;<a href=\"logout?whence=%6e%65%77%73\">logout</a></span></td></tr></table></td></tr><tr style=\"height:10px\"></tr><tr><td><table border=0 cellpadding=0 cellspacing=0><tr><td align=right valign=top class=\"title\">1.</td><td><center><a id=up_7857632 onclick=\"return vote(this)\" href=\"vote?for=7857632&amp;dir=up&amp;by=uptownhr&amp;auth=fa43705fc4b5b3b5e294823262da21725f9df3cf&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857632></span></center></td><td class=\"title\"><a href=\"http://www.bbc.co.uk/news/business-27732743\">Vodafone reveals direct government wiretaps</a><span class=\"comhead\"> (bbc.co.uk) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857632>140 points</span> by <a href=\"user?id=darrhiggs\">darrhiggs</a> 2 hours ago  | <a href=\"flag?id=7857632&amp;by=uptownhr&amp;auth=fa43705fc4b5b3b5e294823262da21725f9df3cf&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857632\">85 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">2.</td><td><center><a id=up_7857064 onclick=\"return vote(this)\" href=\"vote?for=7857064&amp;dir=up&amp;by=uptownhr&amp;auth=e23ad665deb013e5aea5432f3208105887abd549&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857064></span></center></td><td class=\"title\"><a href=\"http://kapeli.com/dash?hn=1\">Dash – Beautiful instant offline docs for almost everything</a><span class=\"comhead\"> (kapeli.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857064>189 points</span> by <a href=\"user?id=AlexMuir\">AlexMuir</a> 4 hours ago  | <a href=\"flag?id=7857064&amp;by=uptownhr&amp;auth=e23ad665deb013e5aea5432f3208105887abd549&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857064\">112 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">3.</td><td><center><a id=up_7857457 onclick=\"return vote(this)\" href=\"vote?for=7857457&amp;dir=up&amp;by=uptownhr&amp;auth=beb3ce3188ac35f5dd3b48bf1f3140bf9abdb83d&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857457></span></center></td><td class=\"title\"><a href=\"http://www.pickchur.com/2013/02/53-years-old-sealed-bottle-garden/\">53 years old Sealed Bottle Garden was last watered in 1972</a><span class=\"comhead\"> (pickchur.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857457>103 points</span> by <a href=\"user?id=Tomte\">Tomte</a> 3 hours ago  | <a href=\"flag?id=7857457&amp;by=uptownhr&amp;auth=beb3ce3188ac35f5dd3b48bf1f3140bf9abdb83d&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857457\">46 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">4.</td><td><center><a id=up_7857889 onclick=\"return vote(this)\" href=\"vote?for=7857889&amp;dir=up&amp;by=uptownhr&amp;auth=9db8f5acc12c675de94426dae88cae4b92c483cc&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857889></span></center></td><td class=\"title\"><a href=\"http://martinfowler.com/articles/is-tdd-dead/#\">Is TDD dead?</a><span class=\"comhead\"> (martinfowler.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857889>33 points</span> by <a href=\"user?id=shutton\">shutton</a> 1 hour ago  | <a href=\"flag?id=7857889&amp;by=uptownhr&amp;auth=9db8f5acc12c675de94426dae88cae4b92c483cc&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857889\">36 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">5.</td><td><center><a id=up_7858000 onclick=\"return vote(this)\" href=\"vote?for=7858000&amp;dir=up&amp;by=uptownhr&amp;auth=2b3fe25f51a0abe91d58551dc5b6b9782787b76d&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7858000></span></center></td><td class=\"title\"><a href=\"http://news.usc.edu/63669/fasting-triggers-stem-cell-regeneration-of-damaged-old-immune-system/\">Fasting triggers stem cell regeneration of damaged, old immune system</a><span class=\"comhead\"> (usc.edu) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7858000>23 points</span> by <a href=\"user?id=adventured\">adventured</a> 1 hour ago  | <a href=\"flag?id=7858000&amp;by=uptownhr&amp;auth=2b3fe25f51a0abe91d58551dc5b6b9782787b76d&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7858000\">7 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">6.</td><td><center><a id=up_7857207 onclick=\"return vote(this)\" href=\"vote?for=7857207&amp;dir=up&amp;by=uptownhr&amp;auth=790cce4fa9f48cae67120a71e1114d644b23bb55&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857207></span></center></td><td class=\"title\"><a href=\"http://blogs.atlassian.com/2014/06/happened-git-2-0-full-goodies/\">It happened: Git 2.0 is here and it’s full of goodies</a><span class=\"comhead\"> (atlassian.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857207>84 points</span> by <a href=\"user?id=durdn\">durdn</a> 4 hours ago  | <a href=\"flag?id=7857207&amp;by=uptownhr&amp;auth=790cce4fa9f48cae67120a71e1114d644b23bb55&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857207\">31 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">7.</td><td><center><a id=up_7857636 onclick=\"return vote(this)\" href=\"vote?for=7857636&amp;dir=up&amp;by=uptownhr&amp;auth=fd1559f319ca206b89c2f20d529fe8c2797c1db3&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857636></span></center></td><td class=\"title\"><a href=\"http://www.reuters.com/article/2014/06/06/us-vodafone-group-disclosure-idUSKBN0EH0UK20140606\">Six governments tap Vodafone calls</a><span class=\"comhead\"> (reuters.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857636>33 points</span> by <a href=\"user?id=Varcht\">Varcht</a> 2 hours ago  | <a href=\"flag?id=7857636&amp;by=uptownhr&amp;auth=fd1559f319ca206b89c2f20d529fe8c2797c1db3&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857636\">2 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">8.</td><td><center><a id=up_7857418 onclick=\"return vote(this)\" href=\"vote?for=7857418&amp;dir=up&amp;by=uptownhr&amp;auth=ff48142f553b7aefbf008d2f58f7d8daa2557268&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857418></span></center></td><td class=\"title\"><a href=\"http://eudoxia0.github.io/crane/\">Crane: An ORM for Common Lisp</a><span class=\"comhead\"> (eudoxia0.github.io) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857418>42 points</span> by <a href=\"user?id=eudox\">eudox</a> 3 hours ago  | <a href=\"flag?id=7857418&amp;by=uptownhr&amp;auth=ff48142f553b7aefbf008d2f58f7d8daa2557268&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857418\">11 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">9.</td><td><center><a id=up_7856949 onclick=\"return vote(this)\" href=\"vote?for=7856949&amp;dir=up&amp;by=uptownhr&amp;auth=0094fed83b1ea778be17690fd53aa58c5ab422f0&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7856949></span></center></td><td class=\"title\"><a href=\"https://github.com/andlabs/ui\">Platform-native GUI library for Go.</a><span class=\"comhead\"> (github.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7856949>105 points</span> by <a href=\"user?id=scapbi\">scapbi</a> 5 hours ago  | <a href=\"flag?id=7856949&amp;by=uptownhr&amp;auth=0094fed83b1ea778be17690fd53aa58c5ab422f0&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7856949\">50 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">10.</td><td><center><a id=up_7857744 onclick=\"return vote(this)\" href=\"vote?for=7857744&amp;dir=up&amp;by=uptownhr&amp;auth=801d038994ebf77d2adf8cee6f9a09dc809efba8&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857744></span></center></td><td class=\"title\"><a href=\"http://blog.tian.io/mojang-threatens-lawyers-against-pay-to-win-minecraft-server-operators\">Mojang threatens lawyers against pay-to-win Minecraft server operators</a><span class=\"comhead\"> (tian.io) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857744>21 points</span> by <a href=\"user?id=atian\">atian</a> 1 hour ago  | <a href=\"flag?id=7857744&amp;by=uptownhr&amp;auth=801d038994ebf77d2adf8cee6f9a09dc809efba8&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857744\">26 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">11.</td><td><center><a id=up_7858177 onclick=\"return vote(this)\" href=\"vote?for=7858177&amp;dir=up&amp;by=uptownhr&amp;auth=abd873c20cba17175e0841753126e5b31828184f&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7858177></span></center></td><td class=\"title\"><a href=\"https://www.counterparty.co/\">Counterparty: Peer-to-Peer Finance on Bitcoin</a><span class=\"comhead\"> (counterparty.co) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7858177>9 points</span> by <a href=\"user?id=coinburgers\">coinburgers</a> 40 minutes ago  | <a href=\"flag?id=7858177&amp;by=uptownhr&amp;auth=abd873c20cba17175e0841753126e5b31828184f&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7858177\">discuss</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">12.</td><td><center><a id=up_7858296 onclick=\"return vote(this)\" href=\"vote?for=7858296&amp;dir=up&amp;by=uptownhr&amp;auth=a8f508d47ee985b26cb948df7e4a01a60aa42ce5&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7858296></span></center></td><td class=\"title\"><a href=\"https://gonative.io/\">Show HN: automatically convert web to Android and iOS</a><span class=\"comhead\"> (gonative.io) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7858296>6 points</span> by <a href=\"user?id=weiyin\"><font color=#3c963c>weiyin</font></a> 21 minutes ago  | <a href=\"flag?id=7858296&amp;by=uptownhr&amp;auth=a8f508d47ee985b26cb948df7e4a01a60aa42ce5&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7858296\">3 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">13.</td><td><center><a id=up_7855168 onclick=\"return vote(this)\" href=\"vote?for=7855168&amp;dir=up&amp;by=uptownhr&amp;auth=74ad67e76bfa6d22ba1861f7ec8466c83f10ba27&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7855168></span></center></td><td class=\"title\"><a href=\"http://tinsnail.neocities.org/\">Who am I: A mind reader (don\'t forget to view source)</a><span class=\"comhead\"> (neocities.org) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7855168>484 points</span> by <a href=\"user?id=alloyed\">alloyed</a> 16 hours ago  | <a href=\"flag?id=7855168&amp;by=uptownhr&amp;auth=74ad67e76bfa6d22ba1861f7ec8466c83f10ba27&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7855168\">153 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">14.</td><td><center><a id=up_7857047 onclick=\"return vote(this)\" href=\"vote?for=7857047&amp;dir=up&amp;by=uptownhr&amp;auth=9db8fad350deeba858f92e0cdd2779ad81bebb9d&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857047></span></center></td><td class=\"title\"><a href=\"http://pintsinthesun.co.uk/\">Pints in the sun</a><span class=\"comhead\"> (pintsinthesun.co.uk) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857047>54 points</span> by <a href=\"user?id=grahamel\">grahamel</a> 5 hours ago  | <a href=\"flag?id=7857047&amp;by=uptownhr&amp;auth=9db8fad350deeba858f92e0cdd2779ad81bebb9d&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857047\">36 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">15.</td><td><center><a id=up_7857315 onclick=\"return vote(this)\" href=\"vote?for=7857315&amp;dir=up&amp;by=uptownhr&amp;auth=27ccd1bbf51f164ce02be223e46a857fcedf417c&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857315></span></center></td><td class=\"title\"><a href=\"item?id=7857315\">Freelancer keeps degrading the coder experience</a></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857315>72 points</span> by <a href=\"user?id=mmisu\">mmisu</a> 3 hours ago  | <a href=\"flag?id=7857315&amp;by=uptownhr&amp;auth=27ccd1bbf51f164ce02be223e46a857fcedf417c&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857315\">48 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">16.</td><td><center><a id=up_7857476 onclick=\"return vote(this)\" href=\"vote?for=7857476&amp;dir=up&amp;by=uptownhr&amp;auth=0f4672bba7225c731a090810af8776b89e17b4c2&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857476></span></center></td><td class=\"title\"><a href=\"item?id=7857476\">Ask HN: Will Hacker News Get An Official \"Show HN\" Section?</a></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857476>54 points</span> by <a href=\"user?id=tronium\"><font color=#3c963c>tronium</font></a> 2 hours ago  | <a href=\"flag?id=7857476&amp;by=uptownhr&amp;auth=0f4672bba7225c731a090810af8776b89e17b4c2&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857476\">19 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">17.</td><td><center><a id=up_7857575 onclick=\"return vote(this)\" href=\"vote?for=7857575&amp;dir=up&amp;by=uptownhr&amp;auth=49512e092df531eb09400f69fbed6a0eae114b70&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857575></span></center></td><td class=\"title\"><a href=\"http://www.codelearn.org/android-tutorial/challenges/android-http-twitter\">Show HN: Android App Dev Challenge</a><span class=\"comhead\"> (codelearn.org) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857575>12 points</span> by <a href=\"user?id=pocha\">pocha</a> 2 hours ago  | <a href=\"flag?id=7857575&amp;by=uptownhr&amp;auth=49512e092df531eb09400f69fbed6a0eae114b70&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857575\">discuss</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">18.</td><td></td><td class=\"title\"><a href=\"http://urx.com/careers/engineering\" rel=\"nofollow\">URX (YC S13) seeks Mobile Engineer to be Hacker-in-Residence</a><span class=\"comhead\"> (urx.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\">1 hour ago</td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">19.</td><td><center><a id=up_7856346 onclick=\"return vote(this)\" href=\"vote?for=7856346&amp;dir=up&amp;by=uptownhr&amp;auth=b7d97e6afecec6ac72bf627fd2e378f023205d1e&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7856346></span></center></td><td class=\"title\"><a href=\"https://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2014/From-Parallel-to-Concurrent\">From Parallel to Concurrent [video]</a><span class=\"comhead\"> (msdn.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7856346>96 points</span> by <a href=\"user?id=mr_tyzic\">mr_tyzic</a> 9 hours ago  | <a href=\"flag?id=7856346&amp;by=uptownhr&amp;auth=b7d97e6afecec6ac72bf627fd2e378f023205d1e&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7856346\">20 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">20.</td><td><center><a id=up_7857236 onclick=\"return vote(this)\" href=\"vote?for=7857236&amp;dir=up&amp;by=uptownhr&amp;auth=4b13b3c41ed1e59cca717451c578e3524f4f3e9e&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857236></span></center></td><td class=\"title\"><a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.3\">HTTP 402 Payment Required</a><span class=\"comhead\"> (w3.org) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857236>25 points</span> by <a href=\"user?id=jnbiche\">jnbiche</a> 4 hours ago  | <a href=\"flag?id=7857236&amp;by=uptownhr&amp;auth=4b13b3c41ed1e59cca717451c578e3524f4f3e9e&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857236\">19 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">21.</td><td><center><a id=up_7858317 onclick=\"return vote(this)\" href=\"vote?for=7858317&amp;dir=up&amp;by=uptownhr&amp;auth=7c380c2ba3da54bdbc12aee475ec4f8294873902&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7858317></span></center></td><td class=\"title\"><a href=\"http://www.slate.com/articles/technology/technology/2014/06/i_sold_my_startup_for_25_5_million_here_s_how_i_did_it.html\" rel=\"nofollow\">I Sold My Startup for $25.5 Million</a><span class=\"comhead\"> (slate.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7858317>3 points</span> by <a href=\"user?id=ForHackernews\">ForHackernews</a> 18 minutes ago  | <a href=\"flag?id=7858317&amp;by=uptownhr&amp;auth=7c380c2ba3da54bdbc12aee475ec4f8294873902&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7858317\">1 comment</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">22.</td><td><center><a id=up_7856339 onclick=\"return vote(this)\" href=\"vote?for=7856339&amp;dir=up&amp;by=uptownhr&amp;auth=5dd7fad6926dcfad67e187a4a37c5174e76223fa&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7856339></span></center></td><td class=\"title\"><a href=\"http://www.technologizer.com/2014/06/05/where-have-you-gone-peter-norton/\">Where have you gone, Peter Norton?</a><span class=\"comhead\"> (technologizer.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7856339>87 points</span> by <a href=\"user?id=technologizer\">technologizer</a> 9 hours ago  | <a href=\"flag?id=7856339&amp;by=uptownhr&amp;auth=5dd7fad6926dcfad67e187a4a37c5174e76223fa&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7856339\">41 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">23.</td><td><center><a id=up_7856474 onclick=\"return vote(this)\" href=\"vote?for=7856474&amp;dir=up&amp;by=uptownhr&amp;auth=4563b19d22494f8a2f7916bf0b18e1c7d32f330b&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7856474></span></center></td><td class=\"title\"><a href=\"http://www.bbc.com/news/health-27695144\">Sleep\'s memory role discovered</a><span class=\"comhead\"> (bbc.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7856474>63 points</span> by <a href=\"user?id=Libertatea\">Libertatea</a> 8 hours ago  | <a href=\"flag?id=7856474&amp;by=uptownhr&amp;auth=4563b19d22494f8a2f7916bf0b18e1c7d32f330b&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7856474\">16 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">24.</td><td><center><a id=up_7857150 onclick=\"return vote(this)\" href=\"vote?for=7857150&amp;dir=up&amp;by=uptownhr&amp;auth=6577503826a249d7613051d0d77d2857872de3e9&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7857150></span></center></td><td class=\"title\"><a href=\"http://pub.gajendra.net/2012/09/hollerith_tyranny\">The Tyranny of the Hollerith Punched Card</a><span class=\"comhead\"> (gajendra.net) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7857150>19 points</span> by <a href=\"user?id=vu3rdd\">vu3rdd</a> 4 hours ago  | <a href=\"flag?id=7857150&amp;by=uptownhr&amp;auth=6577503826a249d7613051d0d77d2857872de3e9&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7857150\">10 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">25.</td><td><center><a id=up_7856931 onclick=\"return vote(this)\" href=\"vote?for=7856931&amp;dir=up&amp;by=uptownhr&amp;auth=cde71ec70675c6704455af6b6e9be34754e4d4fd&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7856931></span></center></td><td class=\"title\"><a href=\"http://realfavicongenerator.net/\">Favicon checker</a><span class=\"comhead\"> (realfavicongenerator.net) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7856931>26 points</span> by <a href=\"user?id=ttty\">ttty</a> 6 hours ago  | <a href=\"flag?id=7856931&amp;by=uptownhr&amp;auth=cde71ec70675c6704455af6b6e9be34754e4d4fd&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7856931\">14 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">26.</td><td><center><a id=up_7856560 onclick=\"return vote(this)\" href=\"vote?for=7856560&amp;dir=up&amp;by=uptownhr&amp;auth=3d13d4557a3fb0793c218a7226a2d191b5d9bdcd&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7856560></span></center></td><td class=\"title\"><a href=\"http://www.bbc.co.uk/news/magazine-27701207\">What was Alan Turing really like?</a><span class=\"comhead\"> (bbc.co.uk) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7856560>54 points</span> by <a href=\"user?id=Turukawa\">Turukawa</a> 8 hours ago  | <a href=\"flag?id=7856560&amp;by=uptownhr&amp;auth=3d13d4557a3fb0793c218a7226a2d191b5d9bdcd&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7856560\">17 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">27.</td><td><center><a id=up_7856214 onclick=\"return vote(this)\" href=\"vote?for=7856214&amp;dir=up&amp;by=uptownhr&amp;auth=e0e8be32d882d08ee32b9adba7837f5e1cf34f0f&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7856214></span></center></td><td class=\"title\"><a href=\"http://www.newyorker.com/online/blogs/currency/2014/06/an-sos-in-a-saks-bag.html\">An S.O.S. in a Saks Bag</a><span class=\"comhead\"> (newyorker.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7856214>63 points</span> by <a href=\"user?id=danielpal\">danielpal</a> 10 hours ago  | <a href=\"flag?id=7856214&amp;by=uptownhr&amp;auth=e0e8be32d882d08ee32b9adba7837f5e1cf34f0f&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7856214\">19 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">28.</td><td><center><a id=up_7856523 onclick=\"return vote(this)\" href=\"vote?for=7856523&amp;dir=up&amp;by=uptownhr&amp;auth=8a8c5f2314adfcc142190b41141041a6335d3d15&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7856523></span></center></td><td class=\"title\"><a href=\"http://motherboard.vice.com/read/exclusive-how-an-fbi-informant-helped-anonymous-hack-brazil\">How FBI Informant Sabu Helped Anonymous Hack Brazil</a><span class=\"comhead\"> (vice.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7856523>40 points</span> by <a href=\"user?id=WestCoastJustin\">WestCoastJustin</a> 8 hours ago  | <a href=\"flag?id=7856523&amp;by=uptownhr&amp;auth=8a8c5f2314adfcc142190b41141041a6335d3d15&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7856523\">13 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">29.</td><td><center><a id=up_7853786 onclick=\"return vote(this)\" href=\"vote?for=7853786&amp;dir=up&amp;by=uptownhr&amp;auth=2285e4157ce04812143c1a42e3ee547a5f0cdf15&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7853786></span></center></td><td class=\"title\"><a href=\"http://website.alinearestaurant.com/site/2014/06/tickets-for-restaurants/\">Tickets for Restaurants</a><span class=\"comhead\"> (alinearestaurant.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7853786>195 points</span> by <a href=\"user?id=BryantD\">BryantD</a> 19 hours ago  | <a href=\"flag?id=7853786&amp;by=uptownhr&amp;auth=2285e4157ce04812143c1a42e3ee547a5f0cdf15&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7853786\">78 comments</a></td></tr><tr style=\"height:5px\"></tr><tr><td align=right valign=top class=\"title\">30.</td><td><center><a id=up_7855565 onclick=\"return vote(this)\" href=\"vote?for=7855565&amp;dir=up&amp;by=uptownhr&amp;auth=b0d52daa580548a5fad16e26a0073e2b571f1742&amp;whence=%6e%65%77%73\"><div class=\"votearrow\" title=\"upvote\"></div></a><span id=down_7855565></span></center></td><td class=\"title\"><a href=\"http://www.imaging-resource.com/news/2013/12/27/on-ice-100-year-old-negative-discovered-in-antarctic-ice\">100-year-old negatives discovered in Antarctic (2013)</a><span class=\"comhead\"> (imaging-resource.com) </span></td></tr><tr><td colspan=2></td><td class=\"subtext\"><span id=score_7855565>112 points</span> by <a href=\"user?id=voidlogic\">voidlogic</a> 14 hours ago  | <a href=\"flag?id=7855565&amp;by=uptownhr&amp;auth=b0d52daa580548a5fad16e26a0073e2b571f1742&amp;whence=%6e%65%77%73\">flag</a> | <a href=\"item?id=7855565\">41 comments</a></td></tr><tr style=\"height:5px\"></tr><tr style=\"height:10px\"></tr><tr><td colspan=2></td><td class=\"title\"><a href=\"/x?fnid=fgZIOtxEI8wEjDfDsABCf1\" rel=\"nofollow\">More</a></td></tr></table></td></tr><tr><td><img src=\"s.gif\" height=10 width=0><table width=\"100%\" cellspacing=0 cellpadding=1><tr><td bgcolor=#ff6600></td></tr></table><br>\n    <center><span class=\"yclinks\"><a href=\"lists\">Lists</a> | <a href=\"rss\">RSS</a> | <a href=\"http://ycombinator.com/bookmarklet.html\">Bookmarklet</a> | <a href=\"http://ycombinator.com/newsguidelines.html\">Guidelines</a> | <a href=\"http://ycombinator.com/newsfaq.html\">FAQ</a> | <a href=\"dmca.html\">DMCA</a> | <a href=\"http://ycombinator.com/newsnews.html\">News News</a> | <a href=\"item?id=363\">Feature Requests</a> | <a href=\"https://github.com/HackerNews/HN/issues\">Bugs</a> | <a href=\"http://ycombinator.com\">Y Combinator</a> | <a href=\"http://ycombinator.com/apply.html\">Apply</a> | <a href=\"http://ycombinator.com/lib.html\">Library</a></span><br><br>\n        <form method=get action=\"//hn.algolia.com/\">Search: <input type=text name=\"q\" value=\"\" size=17></form><br>\n    </center></td></tr></table></center></body></html>"

    describe('#getter/setter html', function(){
        it("should set and get html", function(){
            var gethn = new GetHN();
            gethn.setHtml(html_response);

            assert(html_response, gethn.getHtml() );
        })
    });

    describe('#getPosts', function(){
        var gethn = new GetHN();
        gethn.setHtml(html_response);

        it("should have 28 posts", function(){
            var posts = gethn.getPosts();
            assert.equal(28, posts.length);
        });
    });

    describe('#parsePost', function(){
        it("should return a post with title and url", function(){
            var gethn = new GetHN();
            var post_html = "<a href=\"http://website.alinearestaurant.com/site/2014/06/tickets-for-restaurants/\">Tickets for Restaurants</a>";

            var post = gethn.parsePost(post_html);

            assert.equal('Tickets for Restaurants', post.title);
            assert.equal('http://website.alinearestaurant.com/site/2014/06/tickets-for-restaurants/', post.link);
        })
    })

    describe('#savePosts', function(){
        it("all should save without an error", function(done){
            var gethn = new GetHN();
            gethn.setHtml(html_response);

            var posts = gethn.getPosts();
            gethn.savePosts(done);
        })

        it("only current posts should be left active", function(done){
            
        })
    })
});